<!doctype html>
<html lang="en" class="h-100">

<head>

    <title>SuperDog Events by Shyann Jobe</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
         integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

   <!-- Custom Stylesheets -->
   <link href="css/style.css" rel="stylesheet">
   <link href="css/accordion.css" rel="stylesheet">
   <link href="css/diagonals.css" rel="stylesheet">
   <link href="css/prism.css" rel="stylesheet">

   <!-- Animate CSS -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

   <!-- Font Awesome Script -->
   <script src="https://kit.fontawesome.com/5db21ba9c6.js" crossorigin="anonymous"></script>

   <!-- Fav Icon -->
   <link rel="icon" type="image/png" href="img/mark-light.png">   

</head>

<body class="d-flex flex-column h-100">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="/index.html">
                <img src="img/mark-white.png" class="d-inline-block aligin-text-top" height="35"> 
                SuperDog Events
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav me-auto mb-2 mb-md-0">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="/index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/app.html">The App</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/code.html">The Code</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/helloshyann/superdog-challenge" target="_blank">The Repo</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://helloshyann.com" target="_blank">Portfolio</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Animated Diagonal Background Implemented -->
    <div class="bg"></div>
    <div class="bg bg2"></div>
    <div class="bg bg3"></div>

    <!-- Page Content-->
    <section class="py-5">
        <div class="container px-5 my-5">
            <div class="card text-center p-3">
                <h1 class="fw-bolder animate__animated animate__bounceIn">View the Code</h1>
                <p class="lead fw-normal text-muted mb-0">A simple way to see how this program was written.</p>
            </div>

            <hr>
            
            <div class="row row-cols-1 gx-5">
                <!-- Code Accordion 1-->
                <div class="col col-md-8">                   
                    <h2 class="fw-bolder mb-3">JavaScript Functions</h2>
                    <div class="accordion mb-5" id="accordionExample">
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="headingOne"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                View the array of event objects
                            </button></h3>
                            <div class="accordion-collapse collapse show" id="collapseOne" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    
                                    <pre class="line-numbers">
                                        <code class="language-javascript">
                                            
                                            let events = [{
                                                event: "ComicCon",
                                                city: "New York",
                                                state: "New York",
                                                attendance: 240000,
                                                date: "06/01/2017",
                                              },
                                              {
                                                event: "ComicCon",
                                                city: "New York",
                                                state: "New York",
                                                attendance: 250000,
                                                date: "06/01/2018",
                                              },
                                              {
                                                event: "ComicCon",
                                                city: "New York",
                                                state: "New York",
                                                attendance: 257000,
                                                date: "06/01/2019",
                                              },
                                              {
                                                event: "ComicCon",
                                                city: "San Diego",
                                                state: "California",
                                                attendance: 130000,
                                                date: "06/01/2017",
                                              },
                                              {
                                                event: "ComicCon",
                                                city: "San Diego",
                                                state: "California",
                                                attendance: 140000,
                                                date: "06/01/2018",
                                              },
                                              {
                                                event: "ComicCon",
                                                city: "San Diego",
                                                state: "California",
                                                attendance: 150000,
                                                date: "06/01/2019",
                                              },
                                              {
                                                event: "HeroesCon",
                                                city: "Charlotte",
                                                state: "North Carolina",
                                                attendance: 40000,
                                                date: "06/01/2017",
                                              },
                                              {
                                                event: "HeroesCon",
                                                city: "Charlotte",
                                                state: "North Carolina",
                                                attendance: 45000,
                                                date: "06/01/2018",
                                              },
                                              {
                                                event: "HeroesCon",
                                                city: "Charlotte",
                                                state: "North Carolina",
                                                attendance: 50000,
                                                date: "06/01/2019",
                                              },
                                            ];
                                            
                                            
                                        </code>
                                    </pre>

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="headingTwo"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                function buildDropDown()
                            </button></h3>
                            <div class="accordion-collapse collapse" id="collapseTwo" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    
                                    <pre class="line-numbers">
                                        <code class="language-javascript">
                                            
                                            // Build a dropdown of distinct cities
                                            function buildDropDown(){

                                                let eventDD = document.getElementById("eventDropDown");
                                                // Clear out the drop down
                                                eventDD.innerHTML = "";
                                                // Get the template
                                                let ddTemplate = document.getElementById("cityDD-template");

                                                let currentEvents = JSON.parse(localStorage.getItem("eventData")) || events;

                                                // Get unique values from the array 
                                                let distinctEvents = [...new Set(currentEvents.map((event) => event.city))];

                                                // Use the importNode method to make a copy of the HTML from the node
                                                let ddItemNode = document.importNode(ddTemplate.content, true);
                                                
                                                // Use querySelector methods to select the anchor tag element within the node to modify
                                                let ddItem = ddItemNode.querySelector("a");
                                                
                                                // Use setAttribute method to add a new attribute to the HTML called data string, and set value to "All"
                                                ddItem.setAttribute("data-string", "All");
                                                
                                                // Use textContent method to insert "All" between the opening and closing anchor tag
                                                ddItem.textContent = "All";                                                
                                                
                                                eventDD.appendChild(ddItemNode);

                                                // Loop over each iteration of the mapped cities from the Set
                                                // and add the cities to the drop down
                                                for (let i = 0; i < distinctEvents.length; i++) {

                                                ddItemNode = document.importNode(ddTemplate.content, true);
                                                ddItem = ddItemNode.querySelector("a");
                                                ddItem.setAttribute("data-string", distinctEvents[i]);
                                                ddItem.textContent = distinctEvents[i];
                                                eventDD.appendChild(ddItemNode);
                                                }

                                                displayStats(currentEvents);
                                                displayData();
                                            }
                                            
                                        </code>
                                    </pre>

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="headingThree"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                function getEvents()
                            </button></h3>
                            <div class="accordion-collapse collapse" id="collapseThree" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    
                                    <pre class="line-numbers">
                                        <code class="language-javascript">
                                            
                                            // Get the events for the selected city
                                            function getEvents(ddElement){

                                            let cityName = ddElement.getAttribute("data-string");    
                                            let currentEvents = JSON.parse(localStorage.getItem("eventData")) || events;
                                            let filteredEvents = currentEvents;

                                            document.getElementById("statsHeader").innerHTML = `Stats for ${cityName}`;
                                            
                                            if (cityName != "All"){
                                                // Filter an array
                                                filteredEvents = currentEvents.filter(function (event) {
                                                if (event.city == cityName){
                                                    return event;
                                                }
                                                })
                                            }
                                            
                                            displayStats(filteredEvents);

                                            }
                                            
                                        </code>
                                    </pre>

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="headingFour"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                function displayStats()
                            </button></h3>
                            <div class="accordion-collapse collapse" id="collapseFour" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    
                                    <pre class="line-numbers">
                                        <code class="language-javascript">
                                            
                                            // Display stats for the filtered events
                                            function displayStats(filteredEvents){

                                            let total = 0;
                                            let average = 0;
                                            let most = 0;
                                            let least = -1;

                                            let currentAttendance = 0;

                                            for (let i = 0; i < filteredEvents.length; i++) {
                                                
                                                currentAttendance = filteredEvents[i].attendance;
                                                total += currentAttendance;

                                                if (most < currentAttendance){
                                                most = currentAttendance;
                                                }

                                                if (least > currentAttendance || least < 0){
                                                least = currentAttendance;
                                                }    
                                            }

                                            // Calculate the average
                                            average = total / filteredEvents.length;

                                            document.getElementById("total").innerHTML = total.toLocaleString();
                                            document.getElementById("average").innerHTML = average.toLocaleString(
                                                undefined, {
                                                minimumFractionDigits: 0,
                                                maximumFractionDigits: 0
                                                }
                                            );
                                            document.getElementById("most").innerHTML = most.toLocaleString();
                                            document.getElementById("least").innerHTML = least.toLocaleString();

                                            }
                                            
                                        </code>
                                    </pre>

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="headingFive"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                function displayData()
                            </button></h3>
                            <div class="accordion-collapse collapse" id="collapseFive" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    
                                    <pre class="line-numbers">
                                        <code class="language-javascript">
                                            
                                            // Display data in data tabler
                                            function displayData(){
                                            let template = document.getElementById("eventData-template");
                                            let eventBody = document.getElementById("eventBody");

                                            eventBody.innerHTML = "";

                                            let currentEvents = JSON.parse(localStorage.getItem("eventData")) || events;

                                            for (let i = 0; i < currentEvents.length; i++) {
                                                
                                                let eventRow = document.importNode(template.content, true);
                                                let eventCols = eventRow.querySelectorAll("td");

                                                eventCols[0].textContent = currentEvents[i].event;
                                                eventCols[1].textContent = currentEvents[i].city;
                                                eventCols[2].textContent = currentEvents[i].state;
                                                eventCols[3].textContent = currentEvents[i].attendance;
                                                eventCols[4].textContent = new Date (
                                                currentEvents[i].date
                                                ).toLocaleDateString();
                                                
                                                eventBody.appendChild(eventRow);    
                                            }
                                            }
                                            
                                        </code>
                                    </pre>

                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="headingSix"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                                function saveData()
                            </button></h3>
                            <div class="accordion-collapse collapse" id="collapseSix" aria-labelledby="headingSix" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    
                                    <pre class="line-numbers">
                                        <code class="language-javascript">
                                            
                                            //Save event data to local storage
                                            function saveData() {
                                            let currentEvents = JSON.parse(localStorage.getItem("eventData")) || events;
                                            let stateSelect = document.getElementById("addEventState");
                                            let eventDate = document.getElementById("addDate").value;
                                            let eventDate2 = `${eventDate} 00:00`;

                                            let newEvent = {
                                                event: document.getElementById("addEventName").value,
                                                city: document.getElementById("addCity").value,
                                                state: stateSelect.options[stateSelect.selectedIndex].text,
                                                attendance: parseInt(document.getElementById("addAttendance").value, 10),
                                                date: new Date(eventDate2).toLocaleDateString(),
                                            };

                                            currentEvents.push(newEvent);

                                            localStorage.setItem("eventData", JSON.stringify(currentEvents));

                                            buildDropDown();
                                            displayData();


                                            }
                                            
                                        </code>
                                    </pre>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col col-md-4">
                    <div class="card border-0 bg-light mt-xl-5">
                        <div class="card-body p-4 py-lg-5 code-box">
                            <div class="d-flex align-items-center justify-content-center">
                                <div class="text-center">
                                    <div class="h6">Have more questions?</div>
                                    <p class="mb-4">
                                        Get in touch through my website!
                                    </p>
                                    <div class="d-flex justify-content-center">
                                        <a type="button" href="https://helloshyann.com/#contact" target="_blank" class="btn hvr-pulse-grow btn-outline-dark">
                                            Contact Me
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--Footer Section -->
    <footer class="footer mt-auto py-3 d-none d-xl-block">
        <div class="container-fluid">
            <div class="row row-cols-1 row-cols-lg-3 gy-2">
                <div class="col d-flex align-items-center justify-content-center justify-content-lg-start order-last order-lg-first">
                    <div>
                        <span class="text-light">&copy; Shyann Jobe | helloshyann@gmail.com</span>
                    </div>
                </div>
                <div class="col d-flex align-items-center justify-content-center justify-content-lg-center">
                    <div>
                        <img src="img/mark-white.png" height="30">
                    </div>
                </div>
                <div class="col d-flex align-items-center justify-content-center justify-content-lg-end">
                    <div class="row">
                        
                        <div class="col social">
                            <a href="https://github.com/helloshyann" target="_blank"><i class="fab fa fa-github-square fa-2x"></i></a>
                        </div>
                        <div class="col social">
                            <a href="https://www.linkedin.com/in/helloshyann/" target="_blank"><i class="fab fa fa-linkedin-square fa-2x"></i></a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous">
    </script>
    <script src="js/prism.js"></script>

</body>

</html>